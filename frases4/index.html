 <!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estudi FRASES ¬∑ Format Blanc</title>
<style>
body{margin:0;font-family:system-ui;background:#f1f5f9;color:#0f172a}
header{padding:12px;background:#fff;border-bottom:1px solid #e5e7eb;display:flex;justify-content:center}
.mode-btns button{margin:0 6px;padding:8px 14px;border:none;border-radius:14px;font-weight:700;cursor:pointer}
.mode-en{background:#dbeafe}
.mode-es{background:#fde68a}
main{display:flex;justify-content:center;padding:24px}
.card{position:relative;width:100%;max-width:560px;background:#ffffff;border-radius:28px;padding:32px;box-shadow:0 10px 24px rgba(0,0,0,0.06);text-align:center}
.counter{position:absolute;top:18px;left:22px;font-weight:800;color:#2563eb}
.lang{font-size:14px;font-weight:800;letter-spacing:1px;color:#64748b;margin-bottom:6px}

/* Bloques de navegaci√≥n */
.blocks{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin:15px 0 20px}
.block{width:32px;height:32px;border-radius:50%;border:none;background:#f1f5f9;font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.2s}
.block.active{background:#2563eb !important;color:#fff !important}

/* Contenedor Audio */
.audio-container { display: flex; justify-content: center; gap: 15px; margin: 10px 0 20px; }
.audio-btn{width:85px;height:85px;border-radius:50%;border:none;background:#dbeafe;font-size:32px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.1s;}
.audio-btn.slow{background:#fef08a; font-size:26px;}
.audio-btn:active{transform:scale(0.9)}

.hidden{display:none}
.es{font-size:19px;color:#2563eb;margin-top:14px;line-height:1.4}
.en{font-size:19px;color:#0f172a;margin-top:14px;font-weight:700;line-height:1.4}

.buttons{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:22px}
button.action{padding:16px 0;border:none;border-radius:16px;font-weight:800;cursor:pointer}
.reveal{background:#e0f2fe}
.know{background:#dcfce7}
.next{background:#fbcfe8}

.list-btn{margin-top:16px;background:#e9d5ff;border:none;border-radius:16px;padding:14px;font-weight:800;cursor:pointer;width:100%}
.list-box{max-width:560px;margin:16px auto;background:#fff;border-radius:20px;border:1px solid #e5e7eb;padding:16px;text-align:left}

/* Cuadrito de marcado */
.check-box-manual {
    position: absolute; top: 18px; right: 22px;
    width: 24px; height: 24px;
    background: #fff; border: 1.5px solid #22c55e;
    border-radius: 6px; display: flex;
    align-items: center; justify-content: center;
    cursor: pointer; z-index: 10; font-size: 14px;
}
.check-box-manual.marked { background: #22c55e !important; color: white !important; }
</style>
</head>
<body>

<header>
 <div class="mode-btns">
  <button class="mode-en" onclick="setMode('EN')">Mode angl√®s ‚Üí castell√†</button>
  <button class="mode-es" onclick="setMode('ES')">Mode castell√† ‚Üí angl√®s</button>
 </div>
</header>

<main>
<div class="card">
 <div class="counter" id="counter">0 / 0</div>
 <div class="check-box-manual" id="mainCheck" onclick="markAsDone(this)"></div>
 <div id="langLabel" class="lang">ANGL√àS</div>

 <div id="blockContainer" class="blocks"></div>

 <div class="audio-container">
  <button class="audio-btn" onclick="play(1.0)">üîä</button>
  <button class="audio-btn slow" onclick="play(0.75)">üê¢</button>
 </div>

 <div id="es" class="es hidden"></div>
 <div id="en" class="en hidden"></div>

 <div class="buttons">
  <button class="action reveal" onclick="reveal()">Veure</button>
  <button class="action know" onclick="know()">Ja la s√©</button>
  <button class="action next" onclick="nextOne()">Seg√ºent</button>
 </div>

 <button class="list-btn" onclick="toggleList()">Veure tota la llista</button>
</div>
</main>

<div id="listBox" class="list-box hidden"></div>

<script>
const items = [{audio:"f001.mp3",en:"It was so dark in the hallway that I had a lot of trouble finding the keyhole with my keys, and I spent several minutes trying to open the door.",es:"Estaba tan oscuro en el pasillo que tuve muchos problemas para encontrar la cerradura con las llaves y pas√© varios minutos intentando abrir la puerta."}, {audio:"f002.mp3",en:"I was walking through the living room in the middle of the night and I couldn't find the light switch, so I accidentally tripped over the dog's bed.",es:"Estaba caminando por el sal√≥n en mitad de la noche y no encontraba el interruptor de la luz, as√≠ que tropec√© accidentalmente con la cama del perro."}, {audio:"f003.mp3",en:"The plug of the toaster is a bit loose, so sometimes I have to move it around several times until the machine finally starts working correctly.",es:"El enchufe de la tostadora est√° un poco flojo, as√≠ que a veces tengo que moverlo varias veces hasta que la m√°quina empieza a funcionar correctamente."}, {audio:"f004.mp3",en:"There isn't a single socket near my bed to charge my phone at night, so I have to leave it on the desk across the room.",es:"No hay ni un solo enchufe cerca de mi cama para cargar el m√≥vil por la noche, as√≠ que tengo que dejarlo en el escritorio al otro lado de la habitaci√≥n."}, {audio:"f005.mp3",en:"I really need to organize all the electronics behind the television because there is a mess of cable everywhere and it is very difficult to clean the dust.",es:"Realmente necesito organizar todos los aparatos electr√≥nicos detr√°s del televisor porque hay un l√≠o de cables por todas partes y es muy dif√≠cil limpiar el polvo."}, {audio:"f006.mp3",en:"Since the lamp is too far from the wall, I had to use an extension lead so I could have enough light to read comfortably on the sofa.",es:"Como la l√°mpara est√° demasiado lejos de la pared, tuve que usar un alargador para poder tener suficiente luz y leer c√≥modamente en el sof√°."}, {audio:"f007.mp3",en:"All the lights in the kitchen suddenly went out because a fuse blew while I was using the microwave and the electric oven at the same time.",es:"Todas las luces de la cocina se apagaron de repente porque salt√≥ un fusible mientras estaba usando el microondas y el horno el√©ctrico al mismo tiempo."}, {audio:"f008.mp3",en:"I realized that I had a bit of tomato sauce on my face, so I looked for a napkin on the table to clean myself before our guests arrived.",es:"Me di cuenta de que ten√≠a un poco de salsa de tomate en la cara, as√≠ que busqu√© una servilleta en la mesa para limpiarme antes de que llegaran nuestros invitados."}, {audio:"f009.mp3",en:"We only use the white tablecloth when we have a special dinner at home because it is very difficult to remove the stains if someone spills wine.",es:"Solo usamos el mantel blanco cuando tenemos una cena especial en casa porque es muy dif√≠cil quitar las manchas si alguien derrama vino."}, {audio:"f010.mp3",en:"She carried all the coffee cups and the sugar on a large tray so she wouldn't have to walk back and forth from the kitchen several times.",es:"Llev√≥ todas las tazas de caf√© y el az√∫car en una bandeja grande para no tener que ir y venir de la cocina varias veces."}, {audio:"f011.mp3",en:"I was trying to serve the soup into the bowls, but the ladle was at the bottom of the drawer and I had to move everything to find it.",es:"Estaba intentando servir la sopa en los cuencos, pero el cuchar√≥n estaba en el fondo del caj√≥n y tuve que moverlo todo para encontrarlo."}, {audio:"f012.mp3",en:"You should use a silicone spatula to flip the eggs so you don't scratch the bottom of the pan while you are cooking breakfast.",es:"Deber√≠as usar una esp√°tula de silicona para dar la vuelta a los huevos y no rayar el fondo de la sart√©n mientras preparas el desayuno."}, {audio:"f013.mp3",en:"I had to use the manual whisk to mix the cream and the sugar because the electric mixer was broken and I really wanted to make a cake.",es:"Tuve que usar las varillas manuales para mezclar la nata y el az√∫car porque la batidora el√©ctrica estaba rota y ten√≠a muchas ganas de hacer un pastel."}, {audio:"f014.mp3",en:"Make sure you put enough oil in the frying pan before you start cooking the potatoes, otherwise they will stick to the bottom and burn.",es:"Aseg√∫rate de poner suficiente aceite en la sart√©n antes de empezar a cocinar las patatas, porque si no se pegar√°n al fondo y se quemar√°n."}, {audio:"f015.mp3",en:"I put some milk in a small saucepan to heat it up for my chocolate, but I got distracted talking on the phone and the milk boiled over.",es:"Puse un poco de leche en un cazo peque√±o para calentarla para el chocolate, pero me distraje hablando por tel√©fono y la leche se derram√≥."}, {audio:"f016.mp3",en:"We need a much larger pot if we want to cook enough pasta for all the people who are coming to eat at our house this Sunday.",es:"Necesitamos una olla mucho m√°s grande si queremos cocinar suficiente pasta para toda la gente que viene a comer a nuestra casa este domingo."}, {audio:"f017.mp3",en:"I always use a wooden chopping board to cut the vegetables because it is much better for the knives and it is easier to clean after preparing dinner.",es:"Siempre uso una tabla de cortar de madera para cortar las verduras porque es mucho mejor para los cuchillos y es m√°s f√°cil de limpiar despu√©s de preparar la cena."}, {audio:"f018.mp3",en:"After the pasta was ready, I looked for the strainer in the sink to remove the hot water, but I realized that it was still inside the dishwasher.",es:"Cuando la pasta estuvo lista, busqu√© el colador en el fregadero para quitar el agua caliente, pero me di cuenta de que todav√≠a estaba dentro del lavavajillas."}, {audio:"f019.mp3",en:"My mother always says that you should use a sieve for the flour when you make a sponge cake so that the texture is much lighter and without any lumps.",es:"Mi madre siempre dice que hay que usar un tamiz para la harina cuando haces un bizcocho para que la textura sea mucho m√°s ligera y sin grumos."}, {audio:"f020.mp3",en:"I found a tin can of tomato soup in the back of the cupboard that had been there for months, so I decided to heat it up for a quick lunch.",es:"Encontr√© una lata de sopa de tomate al fondo del armario que llevaba all√≠ meses, as√≠ que decid√≠ calentarla para un almuerzo r√°pido."}, {audio:"f021.mp3",en:"It is very difficult for me to open this jar of jam because the lid is stuck, so I might need to put it under some hot water for a few seconds.",es:"Me resulta muy dif√≠cil abrir este tarro de mermelada porque la tapa est√° atascada, as√≠ que puede que tenga que ponerlo bajo agua caliente unos segundos."}, {audio:"f022.mp3",en:"We were ready to drink some cold sodas on the terrace, but we had to go back to the kitchen because nobody could find the bottle opener.",es:"Est√°bamos listos para beber unos refrescos fr√≠os en la terraza, pero tuvimos que volver a la cocina porque nadie encontraba el abrebotellas."}, {audio:"f023.mp3",en:"Since we are having a nice dinner tonight, I need to find the corkscrew to open the bottle of wine that my friends brought as a gift.",es:"Como esta noche tenemos una cena agradable, necesito encontrar el sacacorchos para abrir la botella de vino que trajeron mis amigos como regalo."}, {audio:"f024.mp3",en:"I need to find the broom to sweep the kitchen floor because I accidentally dropped a glass and there are small pieces everywhere.",es:"Necesito encontrar la escoba para barrer el suelo de la cocina porque se me cay√≥ un vaso accidentalmente y hay peque√±os trozos por todas partes."}, {audio:"f025.mp3",en:"After I finished sweeping the living room, I used the mop with some floor cleaner to make sure everything was smelling fresh and looking shiny.",es:"Despu√©s de terminar de barrer el sal√≥n, us√© la fregona con un poco de limpiador para asegurarme de que todo oliera fresco y quedara brillante."}, {audio:"f026.mp3",en:"I filled the plastic bucket with warm water and a bit of soap so I could clean the terrace before the guests arrived for the barbecue.",es:"Llen√© el cubo de pl√°stico con agua templada y un poco de jab√≥n para poder limpiar la terraza antes de que llegaran los invitados a la barbacoa."}, {audio:"f027.mp3",en:"There is so much dust on top of the bookshelf that I can't even see the color of the books, so I really need to clean it this afternoon.",es:"Hay tanto polvo encima de la estanter√≠a que ni siquiera puedo ver el color de los libros, as√≠ que realmente necesito limpiarla esta tarde."}, {audio:"f028.mp3",en:"The kids were playing in the garden all day and they brought a lot of dirt into the house with their shoes, so now I have to clean the carpet.",es:"Los ni√±os estuvieron jugando en el jard√≠n todo el d√≠a y trajeron mucha suciedad a la casa con los zapatos, as√≠ que ahora tengo que limpiar la alfombra."}, {audio:"f029.mp3",en:"I used an old rag to dry the water that spilled on the wooden table so that the moisture wouldn't ruin the surface.",es:"Us√© un trapo viejo para secar el agua que se derram√≥ sobre la mesa de madera para que la humedad no estropeara la superficie."}, {audio:"f030.mp3",en:"I had to use a very soft sponge to clean the windows because I was afraid that a rougher material might leave some permanent scratches on the glass.",es:"Tuve que usar una esponja muy suave para limpiar las ventanas porque ten√≠a miedo de que un material m√°s √°spero dejara ara√±azos permanentes en el cristal."}, {audio:"f031.mp3",en:"I bought a new brand of liquid detergent that smells like lavender because the one I was using before didn't remove the stains from my clothes very well.",es:"Compr√© una nueva marca de detergente l√≠quido que huele a lavanda porque el que usaba antes no quitaba muy bien las manchas de la ropa."}, {audio:"f032.mp3",en:"You should be very careful when you use bleach to clean the bathroom floor because if a single drop falls on your clothes, it will leave a white stain forever.",es:"Deber√≠as tener mucho cuidado cuando uses lej√≠a para limpiar el suelo del ba√±o porque si una sola gota cae sobre la ropa, dejar√° una mancha blanca para siempre."}, {audio:"f033.mp3",en:"The vacuum cleaner is making a very strange noise today, so I think the bag might be completely full and I need to empty it before I continue.",es:"La aspiradora est√° haciendo un ruido muy extra√±o hoy, as√≠ que creo que la bolsa puede estar completamente llena y necesito vaciarla antes de continuar."}, {audio:"f034.mp3",en:"There was so much rubbish inside the house after the party that we spent the whole morning putting everything into large bags to take them outside.",es:"Hab√≠a tanta basura dentro de la casa despu√©s de la fiesta que pasamos toda la ma√±ana meti√©ndolo todo en bolsas grandes para sacarlas fuera."}, {audio:"f035.mp3",en:"Could you please take the bag out of the kitchen bin and put a new one in, because the smell is starting to be quite unpleasant in the whole room?",es:"¬øPodr√≠as por favor sacar la bolsa de la papelera de la cocina y poner una nueva, porque el olor est√° empezando a ser bastante desagradable en toda la habitaci√≥n?"}, {audio:"f036.mp3",en:"I was trying to use the stapler to keep all these important documents together, but I think it is broken because the papers keep falling apart every time I try.",es:"Estaba intentando usar la grapadora para mantener todos estos documentos importantes juntos, pero creo que est√° rota porque los papeles se separan cada vez que lo intento."}, {audio:"f037.mp3",en:"I need to find a box of refills because I just used the last staple and I still have a lot of pages that I need to organize before the end of the day.",es:"Necesito encontrar una caja de recambios porque acabo de usar la √∫ltima grapa y todav√≠a tengo muchas p√°ginas que organizar antes de que termine el d√≠a."}, {audio:"f038.mp3",en:"I used some transparent tape to fix the corner of the map that was starting to tear, so now it looks much better and it won't break any further.",es:"Us√© un poco de cinta adhesiva transparente para arreglar la esquina del mapa que empezaba a romperse, as√≠ que ahora se ve mucho mejor y no se romper√° m√°s."}, {audio:"f039.mp3",en:"I made a small mistake while I was writing the address on the envelope, but luckily I was using a pencil and I could fix it quickly with an eraser.",es:"Comet√≠ un peque√±o error mientras escrib√≠a la direcci√≥n en el sobre, pero por suerte estaba usando un l√°piz y pude arreglarlo r√°pidamente con una goma."}, {audio:"f040.mp3",en:"I used a long piece of string to tie the box of old magazines together so they would be easier to carry down to the basement this afternoon.",es:"Us√© un trozo largo de cuerda para atar la caja de revistas viejas y que fuera m√°s f√°cil bajarlas al s√≥tano esta tarde."}, {audio:"f041.mp3",en:"We had to use a very thick rope to secure the furniture on top of the car because we didn't want anything to move while we were driving on the highway.",es:"Tuvimos que usar una cuerda muy gruesa para asegurar los muebles encima del coche porque no quer√≠amos que nada se moviera mientras conduc√≠amos por la autopista."}, {audio:"f042.mp3",en:"I tied the plastic bag with a very tight knot so the smell of the rubbish wouldn't come out, but now I can't open it again and I have to use scissors.",es:"At√© la bolsa de pl√°stico con un nudo muy apretado para que no saliera el olor de la basura, pero ahora no puedo volver a abrirla y tengo que usar tijeras."}, {audio:"f043.mp3",en:"I had to stop walking in the middle of the street because a small pebble got inside my shoe and it was very uncomfortable to continue.",es:"Tuve que dejar de caminar en mitad de la calle porque una peque√±a piedra se meti√≥ dentro de mi zapato y era muy inc√≥modo continuar."}, {audio:"f044.mp3",en:"I noticed a small crack on the living room wall after the heavy rain, so I think I should call someone to check if there is any water leaking inside.",es:"Not√© una peque√±a grieta en la pared del sal√≥n despu√©s de la fuerte lluvia, as√≠ que creo que deber√≠a llamar a alguien para comprobar si hay alguna filtraci√≥n de agua."}, {audio:"f045.mp3",en:"Make sure you put the cap back on the toothpaste after you use it, because if you leave it open, the paste will get hard and it will be difficult to use tomorrow.",es:"Aseg√∫rate de volver a poner el tap√≥n en la pasta de dientes despu√©s de usarla, porque si la dejas abierta, la pasta se endurecer√° y ser√° dif√≠cil usarla ma√±ana."}, {audio:"f046.mp3",en:"I always remove the tag from my new clothes before I wear them for the first time because the plastic can be very itchy and annoying on my neck.",es:"Siempre quito la etiqueta de la ropa nueva antes de usarla por primera vez porque el pl√°stico puede picar mucho y resultar molesto en el cuello."}, {audio:"f047.mp3",en:"I found a small screw on the floor under the kitchen table, and now I am worried that one of the chairs might be loose and unsafe to sit on.",es:"Encontr√© un tornillo peque√±o en el suelo debajo de la mesa de la cocina y ahora me preocupa que una de las sillas est√© floja y no sea segura para sentarse."}, {audio:"f048.mp3",en:"I need to find a flat screwdriver to open the back of the TV remote because the batteries are dead and I want to watch the news.",es:"Necesito encontrar un destornillador plano para abrir la parte trasera del mando de la televisi√≥n porque las pilas est√°n agotadas y quiero ver las noticias."}, {audio:"f049.mp3",en:"The wire on the garden fence was bent, so I used some pliers to straighten it out and make sure it wasn't dangerous for the dog.",es:"El alambre de la valla del jard√≠n estaba doblado, as√≠ que us√© unos alicates para enderezarlo y asegurarme de que no fuera peligroso para el perro."}, {audio:"f050.mp3",en:"There is a small water leak under the bathroom sink, so I think I need a wrench to tighten the pipe before the whole floor gets wet.",es:"Hay una peque√±a fuga de agua debajo del lavabo del ba√±o, as√≠ que creo que necesito una llave inglesa para apretar el tubo antes de que se moje todo el suelo."}, {audio:"f051.mp3",en:"We should use a tape measure to see if the new sofa will fit in the living room, because it looks much larger in the store than it does here.",es:"Deber√≠amos usar una cinta m√©trica para ver si el sof√° nuevo cabr√° en el sal√≥n, porque en la tienda parece mucho m√°s grande que aqu√≠."}, {audio:"f052.mp3",en:"I had to climb up the ladder to change the light bulb in the ceiling because it is so high that I cannot reach it even if I stand on a chair.",es:"Tuve que subir por la escalera para cambiar la bombilla del techo porque est√° tan alta que no puedo alcanzarla ni siquiera subi√©ndose a una silla."}, {audio:"f053.mp3",en:"I put a small plant on the window ledge because I wanted it to get more sunlight, but now I have to be careful when I open the window so it doesn't fall.",es:"Puse una planta peque√±a en el alf√©izar de la ventana porque quer√≠a que recibiera m√°s luz solar, pero ahora tengo que tener cuidado al abrir la ventana para que no se caiga."}, {audio:"f054.mp3",en:"It was so windy last night that the shutter in my bedroom kept hitting the wall, making a loud noise that didn't let me sleep until I went to close it.",es:"Hac√≠a tanto viento anoche que la contraventana de mi dormitorio no dejaba de golpear la pared, haciendo un ruido fuerte que no me dej√≥ dormir hasta que fui a cerrarla."}, {audio:"f055.mp3",en:"The curtains in the living room are very difficult to move because the rail is a bit rusty, so I think I should put some oil on it to make it slide better.",es:"Las cortinas del sal√≥n son muy dif√≠ciles de mover porque el riel est√° un poco oxidado, as√≠ que creo que deber√≠a ponerle un poco de aceite para que deslice mejor."}, {audio:"f056.mp3",en:"This old house has a beautiful wooden beam across the ceiling of the kitchen, which gives the whole room a very cozy and traditional feeling.",es:"Esta casa antigua tiene una hermosa viga de madera que cruza el techo de la cocina, lo que le da a toda la estancia un ambiente muy acogedor y tradicional."}, {audio:"f057.mp3",en:"We decided to change the flooring in the hallway because the old wood was starting to make too much noise every time someone walked on it at night.",es:"Decidimos cambiar el suelo del pasillo porque la madera vieja empezaba a hacer demasiado ruido cada vez que alguien caminaba sobre ella por la noche."}, {audio:"f058.mp3",en:"I was using the grater to prepare some cheese for the pizza, but I had to be very careful because the edges are very sharp and I didn't want to cut my fingers.",es:"Estaba usando el rallador para preparar queso para la pizza, pero tuve que tener mucho cuidado porque los bordes son muy afilados y no quer√≠a cortarme los dedos."}, {audio:"f059.mp3",en:"It is much faster to use a peeler than a knife when you have to prepare a lot of potatoes for a big family dinner, and it is also much safer.",es:"Es mucho m√°s r√°pido usar un pelador que un cuchillo cuando tienes que preparar muchas patatas para una cena familiar grande, y adem√°s es mucho m√°s seguro."}, {audio:"f060.mp3",en:"Please use the metal tongs to take the meat out of the pan so you don't burn yourself with the hot oil while you are cooking.",es:"Por favor, usa las pinzas met√°licas para sacar la carne de la sart√©n y no quemarte con el aceite caliente mientras cocinas."}, {audio:"f061.mp3",en:"I couldn't find the rolling pin to flatten the dough for the cookies, so I had to use a clean glass bottle instead to finish the recipe.",es:"No pude encontrar el rodillo para aplanar la masa de las galletas, as√≠ que tuve que usar una botella de vidrio limpia para terminar la receta."}, {audio:"f062.mp3",en:"Be sure to wear oven gloves before you touch the oven tray because it stays hot for a long time after you take the chicken out of the oven.",es:"Aseg√∫rate de usar guantes de horno antes de tocar la bandeja del horno porque permanece caliente durante mucho tiempo despu√©s de sacar el pollo del horno."}, {audio:"f063.mp3",en:"You should put some baking paper on the bottom of the tray so the biscuits don't stick to the surface and they are easier to remove later.",es:"Deber√≠as poner un poco de papel de horno en el fondo de la bandeja para que las galletas no se peguen a la superficie y sea m√°s f√°cil quitarlas despu√©s."}, {audio:"f064.mp3",en:"I wrapped the leftover pizza in some silver foil and put it in the fridge so it would stay fresh for my lunch tomorrow.",es:"Envolv√≠ la pizza sobrante en papel de aluminio y la puse en la nevera para que se mantuviera fresca para mi comida de ma√±ana."}, {audio:"f065.mp3",en:"I need to find the measuring cup because the cake recipe says I need exactly doscientos mililitros de leche and I don't want to make a mistake.",es:"Necesito encontrar la taza medidora porque la receta del pastel dice que necesito exactamente doscientos mililitros de leche y no quiero cometer un error."}, {audio:"f066.mp3",en:"I have already swept all the dirt into a small pile, but now I cannot find the dustpan to pick it up and throw it into the kitchen bin.",es:"Ya he barrido toda la suciedad en un peque√±o mont√≥n, pero ahora no puedo encontrar el recogedor para recogerla y tirarla en la papelera de la cocina."}, {audio:"f067.mp3",en:"This frying pan is very dirty after cooking the meat, so I will need to use a rough scrub and a lot of soap to leave it completely clean.",es:"Esta sart√©n est√° muy sucia despu√©s de cocinar la carne, as√≠ que necesitar√© usar un estropajo √°spero y mucho jab√≥n para dejarla completamente limpia."}, {audio:"f068.mp3",en:"I am very sad because I dropped some red wine on my new white sofa, and now I am afraid that the stain will stay there forever.",es:"Estoy muy triste porque se me cay√≥ un poco de vino tinto en mi sof√° blanco nuevo y ahora temo que la mancha se quede ah√≠ para siempre."}, {audio:"f069.mp3",en:"I was cleaning the bathroom very carefully, but a drop of liquid fell on my blue trousers and created a permanent bleach stain.",es:"Estaba limpiando el ba√±o con mucho cuidado, pero una gota de l√≠quido cay√≥ sobre mis pantalones azules y cre√≥ una mancha permanente de lej√≠a."}, {audio:"f070.mp3",en:"The water in the kitchen sink is going down very slowly today, so I think there is a clog in the pipes that I need to fix soon.",es:"El agua del fregadero de la cocina est√° bajando muy lentamente hoy, as√≠ que creo que hay un atasco en las tuber√≠as que necesito arreglar pronto."}, {audio:"f071.mp3",en:"You should be careful not to drop any food down the drain while you are washing the dishes, because it might cause a bad smell in the kitchen.",es:"Deber√≠as tener cuidado de no dejar caer comida por el desag√ºe mientras lavas los platos, porque podr√≠a provocar un mal olor en la cocina."}, {audio:"f072.mp3",en:"Every time I wash my black sweater, it comes out of the machine covered in white lint, so I have to spend a lot of time cleaning it.",es:"Cada vez que lavo mi jersey negro, sale de la lavadora cubierto de pelusa blanca, as√≠ que tengo que pasar mucho tiempo limpi√°ndolo."}, {audio:"f073.mp3",en:"I had to spend more than thirty minutes at the bank because they asked me to fill out a very long form with all my personal information.",es:"Tuve que pasar m√°s de treinta minutos en el banco porque me pidieron rellenar un formulario muy largo con toda mi informaci√≥n personal."}, {audio:"f074.mp3",en:"I finished writing the letter for my friend in London, but I can't send it yet because I need to go to the post office to buy a stamp.",es:"Termin√© de escribir la carta para mi amigo en Londres, pero todav√≠a no puedo enviarla porque necesito ir a correos a comprar un sello."}, {audio:"f075.mp3",en:"Always keep the receipt in a safe place after buying something expensive, just in case the product is broken and you need to return it.",es:"Siempre deber√≠as guardar el recibo en un lugar seguro despu√©s de comprar algo caro, por si el producto est√° defectuoso y necesitas devolverlo."}, {audio:"f076.mp3",en:"The jacket I ordered online was too small for me, so I sent it back to the store and now I am waiting for them to give me a full refund.",es:"La chaqueta que ped√≠ por internet me quedaba peque√±a, as√≠ que la devolv√≠ a la tienda y ahora estoy esperando a que me hagan un reembolso completo."}];

let currentBlockData = [], pos = 0, mode = "EN", learnedCount = 0, currentBlockID = 0;
const audioObj = new Audio();

function initBlocks() {
  const container = document.getElementById("blockContainer");
  const numBlocks = Math.ceil(items.length / 10);
  container.innerHTML = "";
  for (let i = 0; i < numBlocks; i++) {
    const btn = document.createElement("button");
    btn.className = "block";
    btn.textContent = i + 1;
    btn.onclick = () => loadBlock(i);
    container.appendChild(btn);
  }
  const btnT = document.createElement("button");
  btnT.className = "block"; btnT.textContent = "T";
  btnT.onclick = () => loadBlock('T');
  container.appendChild(btnT);
  loadBlock(0);
}

function loadBlock(b) {
  currentBlockID = b;
  let temp = [];
  if (b === 'T') {
    temp = items.map((item, i) => ({...item, realIdx: i+1}));
  } else {
    let start = b * 10;
    let end = Math.min(start + 10, items.length);
    for (let i = start; i < end; i++) {
      temp.push({...items[i], realIdx: i+1});
    }
  }
  currentBlockData = temp.sort(() => Math.random() - 0.5);
  
  document.querySelectorAll(".block").forEach((btn) => {
    btn.classList.toggle("active", (b === 'T' && btn.textContent === 'T') || (parseInt(btn.textContent)-1 === b));
  });

  pos = 0; learnedCount = 0;
  update(true);
}

function update(fromAction = false) {
  if (currentBlockData.length === 0) {
    document.getElementById("en").textContent = "üéâ Bloc completat!";
    document.getElementById("es").textContent = "";
    document.getElementById("en").classList.remove("hidden");
    return;
  }
  const item = currentBlockData[pos];
  document.getElementById("es").classList.add("hidden");
  document.getElementById("en").classList.add("hidden");

  if (mode === "EN") {
    document.getElementById("langLabel").textContent = "ANGL√àS";
    if (fromAction) play(1.0);
  } else {
    document.getElementById("langLabel").textContent = "CASTELL√Ä";
    document.getElementById("es").textContent = item.es;
    document.getElementById("es").classList.remove("hidden");
  }
  
  document.getElementById("counter").textContent = `${learnedCount} / ${currentBlockData.length + learnedCount}`;
}

function play(speed) {
  if (currentBlockData.length === 0) return;
  const item = currentBlockData[pos];
  audioObj.src = item.audio;
  audioObj.playbackRate = speed;
  audioObj.play().catch(() => {});
}

function reveal() {
  if (currentBlockData.length === 0) return;
  const item = currentBlockData[pos];
  document.getElementById("es").textContent = item.es;
  document.getElementById("en").textContent = item.en;
  document.getElementById("es").classList.remove("hidden");
  document.getElementById("en").classList.remove("hidden");
  if (mode === "ES") play(1.0);
}

function know() {
  if (currentBlockData.length === 0) return;
  learnedCount++;
  currentBlockData.splice(pos, 1);
  if (pos >= currentBlockData.length) pos = 0;
  update(true);
}

function nextOne() {
  if (currentBlockData.length === 0) return;
  pos = (pos + 1) % currentBlockData.length;
  update(true);
}

function setMode(m) { mode = m; update(true); }

function toggleList() {
  const box = document.getElementById("listBox");
  if (!box.classList.contains("hidden")) { box.classList.add("hidden"); return; }
  box.innerHTML = "";
  let start = currentBlockID === 'T' ? 0 : currentBlockID * 10;
  let end = currentBlockID === 'T' ? items.length : Math.min(start + 10, items.length);
  items.slice(start, end).forEach(i => {
    const d = document.createElement("div");
    d.style.padding = "10px 0"; d.style.borderBottom = "1px solid #eee";
    d.innerHTML = `<div style="color:#0f172a; font-weight:800;">${i.en}</div><div style="color:#2563eb; font-weight:700;">${i.es}</div>`;
    box.appendChild(d);
  });
  box.classList.remove("hidden");
}

function getFolderName() { return window.location.pathname.split('/').filter(Boolean).slice(-2, -1)[0] || "unknown"; }
function markAsDone(el) {
    localStorage.setItem(getFolderName(), new Date().toISOString());
    el.innerHTML = "‚úì"; el.classList.add('marked');
    alert("Lli√ß√≥ marcada ‚úÖ");
}

const mainCheck = document.getElementById("mainCheck");
if (localStorage.getItem(getFolderName())) { mainCheck.innerHTML = "‚úì"; mainCheck.classList.add('marked'); }

initBlocks();
</script>
</body>
</html>