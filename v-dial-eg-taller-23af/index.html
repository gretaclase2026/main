 <!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>At the Garage - Practice</title>
<style>
body{margin:0;font-family:system-ui;background:#f1f5f9;color:#0f172a}
header{padding:12px;background:#fff;border-bottom:1px solid #e5e7eb;display:flex;justify-content:center}
.mode-btns button{margin:0 6px;padding:8px 14px;border:none;border-radius:14px;font-weight:700;cursor:pointer}
.mode-en{background:#dbeafe}
.mode-es{background:#fde68a}
main{display:flex;justify-content:center;padding:24px}
.card{position:relative;width:100%;max-width:560px;background:#ffffff;border-radius:28px;padding:32px;box-shadow:0 10px 24px rgba(0,0,0,0.06);text-align:center}
.counter{position:absolute;top:18px;left:22px;font-weight:800;color:#2563eb}
.lang{font-size:14px;font-weight:800;letter-spacing:1px;color:#64748b;margin-bottom:6px}
.audio-container { display: flex; justify-content: center; gap: 12px; margin: 10px 0 20px; align-items: center; }
.audio-btn{width:75px;height:75px;border-radius:50%;border:none;background:#dbeafe;font-size:30px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.1s;}
.audio-btn.slow{background:#fef08a; font-size:24px;}
.audio-btn.auto{width: auto; height: 45px; border-radius: 20px; padding: 0 20px; font-size: 16px; font-weight: 800; background: #ffedd5; color: #9a3412; border: 1px solid #fed7aa;}
.hidden{display:none}
.es{font-size:19px;color:#2563eb;margin-top:14px;line-height:1.4}
.en{font-size:19px;color:#0f172a;margin-top:14px;font-weight:700;line-height:1.4}
.keyword { color: #9333ea; font-weight: 800; }
.buttons{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:22px}
button.action{padding:16px 0;border:none;border-radius:16px;font-weight:800;cursor:pointer}
.reveal{background:#e0f2fe}
.know{background:#dcfce7}
.next{background:#fbcfe8}
.list-btn{margin-top:16px;background:#e9d5ff;border:none;border-radius:16px;padding:14px;font-weight:800;cursor:pointer;width:100%}
.list-box{max-width:560px;margin:16px auto;background:#fff;border-radius:20px;border:1px solid #e5e7eb;padding:16px;text-align:left}
</style>
</head>
<body>
<header>
 <div class="mode-btns">
  <button class="mode-en" onclick="setMode('EN')">Mode angl√®s ‚Üí castell√†</button>
  <button class="mode-es" onclick="setMode('ES')">Mode castell√† ‚Üí angl√®s</button>
 </div>
</header>
<main>
<div class="card">
 <div class="counter" id="counter">1 / 20</div>
 <div id="langLabel" class="lang">LISTENING MODE</div>
 <div class="audio-container">
  <button class="audio-btn" onclick="play(1.0)">üîä</button>
  <button class="audio-btn slow" onclick="play(0.75)">üê¢</button>
  <button id="btnAuto" class="audio-btn auto" onclick="toggleAutoPlay()">‚ñ∂Ô∏è Auto</button>
 </div>
 <div id="es" class="es hidden"></div>
 <div id="en" class="en hidden"></div>
 <div class="buttons">
  <button class="action reveal" onclick="reveal()">Veure</button>
  <button class="action know" onclick="nextOne()">Ent√®s</button>
  <button class="action next" onclick="nextOne()">Seg√ºent</button>
 </div>
 <button class="list-btn" onclick="toggleList()">Veure tot el di√†leg</button>
</div>
</main>
<div id="listBox" class="list-box hidden"></div>

<script>
const items = [
    {audio:"t001.mp3", en:"<span class='keyword'>Woman:</span> Hi! My car is making a very strange noise.", es:"<span class='keyword'>Mujer:</span> ¬°Hola! Mi coche est√° haciendo un ruido muy raro."},
    {audio:"t002.mp3", en:"<span class='keyword'>Mechanic:</span> Good morning. When did the noise start?", es:"<span class='keyword'>Mec√°nico:</span> Buenos d√≠as. ¬øCu√°ndo empez√≥ el ruido?"},
    {audio:"t003.mp3", en:"<span class='keyword'>Woman:</span> It started yesterday while I was driving home.", es:"<span class='keyword'>Mujer:</span> Empez√≥ ayer mientras conduc√≠a a casa."},
    {audio:"t004.mp3", en:"<span class='keyword'>Mechanic:</span> Does it happen when you use the brakes?", es:"<span class='keyword'>Mec√°nico:</span> ¬øPasa cuando usas los frenos?"},
    {audio:"t005.mp3", en:"<span class='keyword'>Woman:</span> No, it only happens when I turn the steering wheel.", es:"<span class='keyword'>Mujer:</span> No, solo pasa cuando giro el volante."},
    {audio:"t006.mp3", en:"<span class='keyword'>Mechanic:</span> Okay. I need to take a look under the hood.", es:"<span class='keyword'>Mec√°nico:</span> Vale. Necesito echar un vistazo bajo el cap√≥."},
    {audio:"t007.mp3", en:"<span class='keyword'>Woman:</span> I also noticed a small oil leak in my garage.", es:"<span class='keyword'>Mujer:</span> Tambi√©n he notado una peque√±a fuga de aceite en mi garaje."},
    {audio:"t008.mp3", en:"<span class='keyword'>Mechanic:</span> That could be a problem with the gasket.", es:"<span class='keyword'>Mec√°nico:</span> Eso podr√≠a ser un problema con la junta."},
    {audio:"t009.mp3", en:"<span class='keyword'>Woman:</span> Is it going to be a very expensive repair?", es:"<span class='keyword'>Mujer:</span> ¬øVa a ser una reparaci√≥n muy cara?"},
    {audio:"t010.mp3", en:"<span class='keyword'>Mechanic:</span> I'm not sure yet; I have to run some tests.", es:"<span class='keyword'>Mec√°nico:</span> No estoy seguro todav√≠a; tengo que hacer unas pruebas."},
    {audio:"t011.mp3", en:"<span class='keyword'>Woman:</span> How long will it take to fix the car?", es:"<span class='keyword'>Mujer:</span> ¬øCu√°nto tiempo tardar√° en arreglarse el coche?"},
    {audio:"t012.mp3", en:"<span class='keyword'>Mechanic:</span> It should be ready by Thursday afternoon.", es:"<span class='keyword'>Mec√°nico:</span> Deber√≠a estar listo para el jueves por la tarde."},
    {audio:"t013.mp3", en:"<span class='keyword'>Woman:</span> Can I have a courtesy car in the meantime?", es:"<span class='keyword'>Mujer:</span> ¬øPuedo tener un coche de sustituci√≥n mientras tanto?"},
    {audio:"t014.mp3", en:"<span class='keyword'>Mechanic:</span> Let me check if we have one available.", es:"<span class='keyword'>Mec√°nico:</span> D√©jeme comprobar si tenemos uno disponible."},
    {audio:"t015.mp3", en:"<span class='keyword'>Woman:</span> Please, check the tire pressure as well.", es:"<span class='keyword'>Mujer:</span> Por favor, compruebe tambi√©n la presi√≥n de los neum√°ticos."},
    {audio:"t016.mp3", en:"<span class='keyword'>Mechanic:</span> Of course, we do that as part of our service.", es:"<span class='keyword'>Mec√°nico:</span> Por supuesto, hacemos eso como parte de nuestro servicio."},
    {audio:"t017.mp3", en:"<span class='keyword'>Woman:</span> Great. Should I sign any paperwork now?", es:"<span class='keyword'>Mujer:</span> Genial. ¬øDebo firmar alg√∫n papeleo ahora?"},
    {audio:"t018.mp3", en:"<span class='keyword'>Mechanic:</span> Yes, please sign this authorization form here.", es:"<span class='keyword'>Mec√°nico:</span> S√≠, por favor firme este formulario de autorizaci√≥n aqu√≠."},
    {audio:"t019.mp3", en:"<span class='keyword'>Woman:</span> Thank you. Call me when you have the estimate.", es:"<span class='keyword'>Mujer:</span> Gracias. Ll√°meme cuando tenga el presupuesto."},
    {audio:"t020.mp3", en:"<span class='keyword'>Mechanic:</span> I will call you as soon as I know something.", es:"<span class='keyword'>Mec√°nico:</span> Le llamar√© tan pronto como sepa algo."}
];

let pos = 0, mode = "EN", isAutoPlaying = false;
const audioObj = new Audio();

function update(fromAction = false) {
  const item = items[pos];
  document.getElementById("es").classList.add("hidden");
  document.getElementById("en").classList.add("hidden");
  
  if (mode === "EN") {
    document.getElementById("langLabel").textContent = "LISTENING MODE";
    if (fromAction && !isAutoPlaying) play(1.0); 
  } else {
    document.getElementById("langLabel").textContent = "CASTELL√Ä";
    document.getElementById("es").innerHTML = item.es;
    document.getElementById("es").classList.remove("hidden");
  }
  document.getElementById("counter").textContent = `${pos + 1} / ${items.length}`;
}

function play(speed) {
  const item = items[pos];
  audioObj.src = item.audio;
  audioObj.playbackRate = speed;
  audioObj.play().catch(() => {});
}

function toggleAutoPlay() {
  isAutoPlaying = !isAutoPlaying;
  const btn = document.getElementById("btnAuto");
  if (isAutoPlaying) {
    btn.innerHTML = "‚èπÔ∏è Stop";
    btn.style.background = "#ffedd5";
    playNextAuto();
  } else {
    btn.innerHTML = "‚ñ∂Ô∏è Auto";
    btn.style.background = "#ffedd5";
    audioObj.pause();
    update();
  }
}

function playNextAuto() {
  if (!isAutoPlaying) return;
  document.getElementById("es").classList.add("hidden");
  document.getElementById("en").classList.add("hidden");
  play(1.0);
  
  audioObj.onended = () => {
    setTimeout(() => {
      if (isAutoPlaying) {
        if (pos < items.length - 1) {
          pos++;
          update();
          playNextAuto();
        } else {
          toggleAutoPlay();
          pos = 0;
          update();
        }
      }
    }, 1200);
  };
}

function reveal() {
  const item = items[pos];
  document.getElementById("es").innerHTML = item.es;
  document.getElementById("en").innerHTML = item.en;
  document.getElementById("es").classList.remove("hidden");
  document.getElementById("en").classList.remove("hidden");
}

function nextOne() {
  if (isAutoPlaying) toggleAutoPlay();
  pos = (pos + 1) % items.length;
  update(true);
}

function setMode(m) { mode = m; update(true); }

function toggleList() {
  const box = document.getElementById("listBox");
  if (!box.classList.contains("hidden")) { box.classList.add("hidden"); return; }
  box.innerHTML = "";
  items.forEach(i => {
    const d = document.createElement("div");
    d.style.padding = "10px 0"; d.style.borderBottom = "1px solid #eee";
    d.innerHTML = `<div style="color:#0f172a; font-weight:800;">${i.en}</div><div style="color:#2563eb; font-weight:700;">${i.es}</div>`;
    box.appendChild(d);
  });
  box.classList.remove("hidden");
}

update();
</script>
</body>
</html>