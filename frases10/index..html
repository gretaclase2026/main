 <!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast English - 50</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#ececec;color:#333}
.card{max-width:720px;margin:20px auto;background:#fff;border-radius:24px;padding:24px;box-shadow:0 8px 18px rgba(0,0,0,.15);position:relative}
.modes{display:flex;gap:10px;margin-bottom:10px;width:100%}
.mode{flex:1;text-align:center;padding:14px;border-radius:24px;font-weight:bold;cursor:pointer;border:2px solid transparent}
.mode.en{background:#d6e6f5}
.mode.es{background:#f4d6e6}
.mode.active{border-color:#999;box-shadow:0 2px 5px rgba(0,0,0,0.1)}
.blocks{display:flex;flex-wrap:wrap;gap:8px;margin:15px 0}
.block{width:40px;height:40px;border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;font-weight:bold;background:#fff4cc;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,0.1)}
.block.active{background:#ffcc00;box-shadow:inset 0 2px 4px rgba(0,0,0,0.2)}
.lang-label{text-align:center;font-weight:bold;color:#888;margin-bottom:10px;text-transform:uppercase;letter-spacing:1px}
.audio-section{display:flex;align-items:center;justify-content:center;position:relative;margin:30px 0}
.audio-btn{width:130px;height:130px;background:#d1e7dd;border:8px solid #f0f0f0;border-radius:50%;font-size:60px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform 0.1s}
.audio-btn:active{transform:scale(0.9)}
.counter{position:absolute;right:10px;font-weight:bold;color:#2563eb;font-size:24px}
.word{text-align:center;font-size:28px;font-weight:bold;margin:20px 0;min-height:35px}
.answer{text-align:center;font-size:22px;color:#2563eb;margin-top:10px;display:none;font-weight:bold}
.pron{color:#9333ea;font-size:16px;margin-top:5px;font-style:italic}
.actions{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:25px}
.btn{padding:18px;border-radius:20px;border:none;font-weight:bold;cursor:pointer;font-size:16px}
.btn-reveal{background:#d6e6f5}
.btn-know{background:#d1e7dd}
.btn-next{background:#f8d7da}
.list-toggle{display:block;width:100%;margin-top:20px;padding:16px;background:#e9d5ff;border:none;border-radius:20px;cursor:pointer;font-weight:bold;color:#333;font-size:16px}
.list{margin-top:15px;display:none;background:#f9f9f9;padding:15px;border-radius:15px;font-size:14px;line-height:1.6}
.vibrate{animation:vibrate 0.3s linear}
@keyframes vibrate{0%{transform:rotate(0)}25%{transform:rotate(5deg)}50%{transform:rotate(0)}75%{transform:rotate(-5deg)}100%{transform:rotate(0)}}
</style>
</head>
<body>
<div class="card">
  <div class="modes">
    <div id="mEN" class="mode en active" onclick="setMode('EN')">INGL√âS ‚Üí ESPA√ëOL</div>
    <div id="mES" class="mode es" onclick="setMode('ES')">ESPA√ëOL ‚Üí INGL√âS</div>
  </div>
  <div class="blocks" id="blockContainer"></div>
  <div class="lang-label" id="langLabel">INGL√âS R√ÅPIDO</div>
  <div class="audio-section">
    <button class="audio-btn" onclick="playAudio()">üîä</button>
    <div class="counter" id="counterDisplay">0 / 10</div>
  </div>
  <div class="word" id="word"></div>
  <div id="answer" class="answer"></div>
  <div class="actions">
    <button class="btn btn-reveal" onclick="reveal()">VEURE</button>
    <button class="btn btn-know" onclick="know()">JA LA S√â</button>
    <button class="btn btn-next" onclick="next()">SEG√úENT</button>
  </div>
  <button class="list-toggle" onclick="toggleList()">MOSTRAR LLISTA</button>
  <div id="list" class="list"></div>
</div>
<audio id="audio"></audio>
<script>
const data = [
  {en:"I am going to do it", es:"Lo voy a hacer", ca:"Ho far√©", fast:"Gonna"},
  {en:"I want to go now", es:"Quiero irme ahora", ca:"Vull anar-me'n ara", fast:"Wanna"},
  {en:"I have got to leave", es:"Tengo que irme", ca:"Me n'he d'anar", fast:"Gotta"},
  {en:"Give me a break", es:"Dame un respiro", ca:"Dona'm un respir", fast:"Gimme"},
  {en:"Let me know later", es:"Av√≠same luego", ca:"Avisa'm despr√©s", fast:"Lemme"},
  {en:"It is kind of funny", es:"Es un poco divertido", ca:"√âs una mica divertit", fast:"Kinda"},
  {en:"I do not know yet", es:"A√∫n no lo s√©", ca:"Encara no ho s√©", fast:"Dunno"},
  {en:"Get out of here", es:"Fuera de aqu√≠", ca:"Fora d'aqu√≠", fast:"Outta"},
  {en:"What are you doing?", es:"¬øQu√© haces?", ca:"Qu√® fas?", fast:"Whatcha"},
  {en:"It is because I can", es:"Es porque puedo", ca:"√âs perqu√® puc", fast:"'Cause"},
  {en:"I have to study more", es:"Tengo que estudiar m√°s", ca:"He d'estudiar m√©s", fast:"Hafta"},
  {en:"She has to work", es:"Ella tiene que trabajar", ca:"Ella ha de treballar", fast:"Hasta"},
  {en:"I used to live here", es:"Sol√≠a vivir aqu√≠", ca:"Solia viure aqu√≠", fast:"Usta"},
  {en:"Did you see him?", es:"¬øLo viste?", ca:"El vas veure?", fast:"Didja"},
  {en:"I should have told you", es:"Deber√≠a haberte dicho", ca:"T'ho hauria d'haver dit", fast:"Shoulda"},
  {en:"It would have been nice", es:"Habr√≠a estado bien", ca:"Hauria estat b√©", fast:"Woulda"},
  {en:"You could have won", es:"Podr√≠as haber ganado", ca:"Podries haver guanyat", fast:"Coulda"},
  {en:"He must have forgot", es:"√âl debe haber olvidado", ca:"Ell deu haver oblidat", fast:"Musta"},
  {en:"There is a lot of time", es:"Hay mucho tiempo", ca:"Hi ha molt de temps", fast:"Lotta"},
  {en:"Tell them the truth", es:"Diles la verdad", ca:"Digues-los la veritat", fast:"Tell'em"},
  {en:"Don't you like it?", es:"¬øNo te gusta?", ca:"No t'agrada?", fast:"Doncha"},
  {en:"Won't you come?", es:"¬øNo vendr√°s?", ca:"No vindr√†s?", fast:"Woncha"},
  {en:"I am out of money", es:"Me qued√© sin dinero", ca:"M'he quedat sense diners", fast:"Outta"},
  {en:"Sort of boring", es:"Algo aburrido", ca:"Una mica avorrit", fast:"Sorta"},
  {en:"I am going to eat", es:"Voy a comer", ca:"Anir√© a menjar", fast:"Gonna"},
  {en:"Do you want a drink?", es:"¬øQuieres beber algo?", ca:"Vols beure alguna cosa?", fast:"Wanna"},
  {en:"Got you!", es:"¬°Te pill√©!", ca:"T'he enxampat!", fast:"Gotcha"},
  {en:"See you later", es:"Nos vemos luego", ca:"Ens veiem despu√©s", fast:"See ya"},
  {en:"How are you doing?", es:"¬øC√≥mo te va?", ca:"Com te va?", fast:"How ya doin'"},
  {en:"I am about to cry", es:"Estoy a punto de llorar", ca:"Estic a punt de plorar", fast:"Bouta"},
  {en:"Come here right now", es:"Ven aqu√≠ ahora mismo", ca:"Vine aqu√≠ ara mateix", fast:"Comeer"},
  {en:"Why do you lie?", es:"¬øPor qu√© mientes?", ca:"Per qu√® mentes?", fast:"Why july"},
  {en:"Is he your brother?", es:"¬øEs √©l tu hermano?", ca:"√âs ell el teu germ√†?", fast:"Izi"},
  {en:"Did you ever go?", es:"¬øFuiste alguna vez?", ca:"Hi vas anar mai?", fast:"Jeveer"},
  {en:"I will ask her later", es:"Le preguntar√© luego", ca:"Li preguntar√© despr√©s", fast:"Alaskar"},
  {en:"Don't you know?", es:"¬øNo lo sabes?", ca:"No ho saps?", fast:"Doncha"},
  {en:"Not yet", es:"A√∫n no", ca:"Encara no", fast:"Nachet"},
  {en:"Meet you there", es:"Te veo all√≠", ca:"Ens veiem all√†", fast:"Meecha"},
  {en:"Bless you", es:"Salud / Jes√∫s", ca:"Salut / Jes√∫s", fast:"Blessha"},
  {en:"Can't you see?", es:"¬øNo puedes ver?", ca:"No ho pots veure?", fast:"Cancha"},
  {en:"Wouldn't you?", es:"¬øNo lo har√≠as t√∫?", ca:"No ho faries tu?", fast:"Woodencha"},
  {en:"What do you think?", es:"¬øQu√© piensas?", ca:"Qu√® en penses?", fast:"Whatcha"},
  {en:"I'll get you", es:"Te atrapar√©", ca:"T'atrapar√©", fast:"Getcha"},
  {en:"Could you help me?", es:"¬øPodr√≠as ayudarme?", ca:"Em podries ajudar?", fast:"Couldja"},
  {en:"Might have been", es:"Podr√≠a haber sido", ca:"Podria haver estat", fast:"Mighta"},
  {en:"Bet you", es:"Te apuesto", ca:"T'aposto", fast:"Betcha"},
  {en:"In front of", es:"Delante de", ca:"Davant de", fast:"In fronna"},
  {en:"Want a cup of tea?", es:"¬øQuieres un t√©?", ca:"Vols una tassa de te?", fast:"Wanna cuppa"},
  {en:"Lots of people", es:"Mucha gente", ca:"Molta gent", fast:"Lotsa"},
  {en:"I am going to try", es:"Voy a intentarlo", ca:"Ho intentar√©", fast:"Gonna"}
];
let mode="EN", currentBlockID='T', currentBlockData=[], pos=0, learnedCount=0, totalInBlock=50;
function initBlocks(){
  const container=document.getElementById("blockContainer");
  const tBtn=document.createElement("button");
  tBtn.className="block active"; tBtn.innerText="T"; tBtn.onclick=()=>setBlock('T');
  container.appendChild(tBtn);
  for(let i=0; i<5; i++){
    const b=document.createElement("button");
    b.className="block"; b.innerText=i+1;
    b.onclick=()=>setBlock(i);
    container.appendChild(b);
  }
  setBlock('T');
}
function setBlock(id){
  currentBlockID=id; learnedCount=0;
  if(id==='T'){
    currentBlockData=data.map((d,i)=>({...d, realIdx:i+1}));
    totalInBlock=50;
  }else{
    const start=id*10;
    currentBlockData=data.slice(start, start+10).map((d,i)=>({...d, realIdx:start+i+1}));
    totalInBlock=10;
  }
  pos=0;
  document.querySelectorAll(".block").forEach(b=>{
    b.className=(b.innerText==(id==='T'?'T':id+1))?"block active":"block";
  });
  update(true);
}
function setMode(m){
  mode=m;
  document.getElementById("mEN").className=m==="EN"?"mode en active":"mode en";
  document.getElementById("mES").className=m==="ES"?"mode es active":"mode es";
  update(true);
}
function update(newWord){
  const lb=document.getElementById("langLabel");
  const w=document.getElementById("word");
  const a=document.getElementById("answer");
  a.style.display="none";
  if(currentBlockData.length===0){w.innerText="Bloc completat!"; return;}
  const item=currentBlockData[pos];
  if(mode==="EN"){
    lb.innerText="INGL√âS R√ÅPIDO"; w.innerText="";
    if(newWord) playAudio();
  }else{
    lb.innerText="CASTELL√Ä / CATAL√Ä";
    w.innerHTML=`<span style="color:#2563eb;">${item.es} / ${item.ca}</span>`;
  }
  document.getElementById("counterDisplay").innerText=`${learnedCount} / ${totalInBlock}`;
}
function reveal(){
  if(currentBlockData.length>0){
    const item=currentBlockData[pos];
    const a=document.getElementById("answer");
    document.getElementById("word").innerText=item.en;
    a.innerHTML=`<div class="pron">Suena como: ${item.fast}</div><span style="color:#2563eb;">${item.es} / ${item.ca}</span>`;
    a.style.display="block";
    if(mode==="ES") playAudio();
  }
}
function know(){
  if(currentBlockData.length===0) return;
  learnedCount++;
  currentBlockData.splice(pos,1);
  if(pos>=currentBlockData.length) pos=0;
  update(true);
}
function next(){
  if(currentBlockData.length===0) return;
  pos=(pos+1)%currentBlockData.length;
  update(true);
}
function playAudio(){
  if(currentBlockData.length===0) return;
  const num=currentBlockData[pos].realIdx.toString().padStart(3,"0");
  const a=document.getElementById("audio");
  a.src="f"+num+".mp3";
  const btn=document.querySelector('.audio-btn');
  btn.classList.remove('vibrate'); void btn.offsetWidth; btn.classList.add('vibrate');
  a.play().catch(()=>{});
}
function toggleList(){
  const l=document.getElementById("list");
  if(l.style.display==="block"){l.style.display="none"; return;}
  l.style.display="block";
  l.innerHTML="<b>Llista del bloc:</b><br><br>";
  currentBlockData.forEach(item=>{
    l.innerHTML+=`<b>${item.en}</b> (${item.fast})<br><span style="color:#2563eb;">${item.es} / ${item.ca}</span><br><br>`;
  });
}
initBlocks();
 // --- C√ìDIGO INTELIGENTE PARA EL CUADRITO DE MARCADO ---

const style = document.createElement('style');
style.innerHTML = `
    .check-box-manual {
        position: absolute;
        top: 85px; 
        right: 22px;
        width: 24px;
        height: 24px;
        background: #fff !important;
        border: 1.5px solid #22c55e !important;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        transition: all 0.2s;
        font-size: 14px;
    }
    .check-box-manual.marked { 
        background: #22c55e !important; 
        color: white; 
    }
`;
document.head.appendChild(style);

function getFolderName() {
    const path = window.location.pathname;
    return path.split('/').filter(Boolean).slice(-2, -1)[0] || "unknown";
}

function markAsDone(element) {
    localStorage.setItem(getFolderName(), new Date().toISOString());
    element.innerHTML = "‚úì";
    element.classList.add('marked');
    alert("Lli√ß√≥ marcada ‚úÖ");
}

// 1. Crear el cuadrito
const card = document.querySelector(".card");
const box = document.createElement("div");
box.className = "check-box-manual";

// 2. Comprobar si ya estaba marcada antes de pintarla
if (localStorage.getItem(getFolderName())) {
    box.innerHTML = "‚úì";
    box.classList.add('marked');
}

box.onclick = function() { markAsDone(this); };
card.appendChild(box);
</script>
</body>
</html>