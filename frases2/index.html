 <!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Greta App - Frases Tema 2</title>
<style>
body{margin:0;font-family:sans-serif;background:#f9fafb;color:#0f172a}
header{padding:12px;background:#fff;border-bottom:1px solid #e5e7eb;display:flex;justify-content:center}
.mode-btns button{margin:0 6px;padding:8px 14px;border:none;border-radius:14px;font-weight:700;cursor:pointer}
.mode-en{background:#dbeafe}
.mode-es{background:#fde68a}
main{display:flex;justify-content:center;padding:24px}
.card{position:relative;width:100%;max-width:560px;background:#fff;border-radius:28px;padding:32px;box-shadow:0 12px 30px rgba(0,0,0,0.08);text-align:center}
.counter{position:absolute;top:18px;right:22px;font-weight:800;color:#2563eb}
.lang{font-size:14px;font-weight:800;letter-spacing:1px;color:#64748b;margin-bottom:6px}
.audio-btn{width:120px;height:120px;border-radius:50%;border:none;background:#dbeafe;font-size:36px;cursor:pointer;margin:6px auto 10px;display:flex;align-items:center;justify-content:center}
.hidden{display:none}
.key{font-size:16px;font-weight:900;color:#9333ea;margin:10px 0}
.es{font-size:20px;color:#2563eb;margin-top:14px}
.en{font-size:20px;color:#0f172a;margin-top:14px;font-weight:700}
.buttons{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:22px}
button.action{padding:16px 0;border:none;border-radius:16px;font-weight:800;cursor:pointer}
.reveal{background:#e0f2fe}
.know{background:#dcfce7}
.next{background:#fbcfe8}
.list-btn{margin-top:16px;background:#e9d5ff;border:none;border-radius:16px;padding:14px;font-weight:800;cursor:pointer;width:100%}
.list-box{max-width:560px;margin:16px auto;background:#fff;border-radius:20px;border:1px solid #e5e7eb;padding:16px;text-align:left}
.list-item{padding:10px 0;border-bottom:1px solid #e5e7eb}
.list-item:last-child{border-bottom:none}
.list-es{color:#2563eb;font-weight:700}
.list-en{color:#0f172a;font-weight:800}
.end{margin-top:16px;font-weight:800;color:#16a34a}
</style>
</head>
<body>
<header>
 <div class="mode-btns">
  <button class="mode-en" onclick="setMode('EN')">ANGLÃˆS â†’ CASTELLÃ€</button>
  <button class="mode-es" onclick="setMode('ES')">CASTELLÃ€ â†’ ANGLÃˆS</button>
 </div>
</header>
<main>
<div class="card">
 <div class="counter" id="counter">0 / 7</div>
 <div id="langLabel" class="lang">ANGLÃˆS</div>
 <button class="audio-btn" onclick="play()">ðŸ”Š</button>
 <div id="key" class="key hidden"></div>
 <div id="es" class="es hidden"></div>
 <div id="en" class="en hidden"></div>
 <div class="buttons">
  <button class="action reveal" onclick="reveal()">Veure</button>
  <button class="action know" onclick="know()">Ja la sÃ©</button>
  <button class="action next" onclick="nextOne()">SegÃ¼ent</button>
 </div>
 <button class="list-btn" onclick="toggleList()">Veure tota la llista</button>
 <div id="endMsg" class="end hidden">âœ” Ja les saps totes</div>
</div>
</main>
<div id="listBox" class="list-box hidden"></div>

<script>
const items = [
    {"audio": "f001.mp3", "key": "put off / furthermore", "es": "No quiero posponer mis deberes de ingles porque es muy importante para mi futuro; ademas, tengo mucho tiempo libre esta tarde y el tiempo es muy bueno para estudiar.", "en": "I do not want to put off my English homework because it is very important for my future; besides, I have a lot of free time this afternoon and the weather is very good for studying."},
    {"audio": "f002.mp3", "key": "handy", "es": "Mi nuevo telefono inteligente es muy practico porque puedo usar el GPS para encontrar un restaurante, puedo llamar a mi madre todos los dias, y tambien puedo hacer muchas fotos bonitas de mi gato en el parque.", "en": "My new smartphone is very handy because I can use the GPS to find a restaurant, I can call my mother every day, and I can also take many beautiful photos of my cat in the park."},
    {"audio": "f003.mp3", "key": "otherwise", "es": "Necesitas comer todas tus verduras y beber mucha agua cada maÃ±ana; de lo contrario, no tendras energia para jugar al futbol con tus amigos o ir al gimnasio por la noche.", "en": "You need to eat all your vegetables and drink a lot of water every morning; otherwise, you will not have energy to play football with your friends or go to the gym at night."},
    {"audio": "f004.mp3", "key": "awkward", "es": "Estaba en una fiesta grande con mucha gente y olvide el nombre de mi jefe, asi que hubo un silencio incomodo por mucho tiempo y me senti muy rojo de la cara.", "en": "I was at a big party with many people and I forgot the name of my boss, so there was an awkward silence for a long time and I felt very red in the face."},
    {"audio": "f005.mp3", "key": "amusing", "es": "Ayer vi una pelicula muy divertida sobre un grupo de perros que pueden hablar espaÃ±ol y van a una ciudad grande para encontrar un tesoro secreto en una casa pequeÃ±a.", "en": "Yesterday I saw a very amusing movie about a group of dogs that can speak Spanish and they go to a big city to find a secret treasure in a small house."},
    {"audio": "f006.mp3", "key": "amazing", "es": "La vista desde la ventana de mi hotel es increible porque puedo ver el oceano azul, las montaÃ±as altas con nieve, y el sol hermoso cada maÃ±ana cuando bebo mi cafe.", "en": "The view from the window of my hotel is amazing because I can see the blue ocean, the tall mountains with snow, and the beautiful sun every morning when I drink my coffee."},
    {"audio": "f007.mp3", "key": "harmless", "es": "No necesitas tener miedo de ese animal pequeÃ±o en el jardin porque es completamente inofensivo, solo quiere comer algo de hierba verde y dormir bajo el arbol grande.", "en": "You do not need to be afraid of that small animal in the garden because it is completely harmless, it only wants to eat some green grass and sleep under the big tree."}
];

let remaining=[...items], current=null, mode="EN", known=0;
let audioPlayer = new Audio();

function updateCounter(){ document.getElementById("counter").textContent = known + " / " + items.length; }

function play(){ 
    if(current) {
        audioPlayer.src = current.audio;
        audioPlayer.play().catch(e => console.log("Error audio"));
    }
}

function load(){
 if(remaining.length===0){
   document.getElementById("endMsg").classList.remove("hidden");
   return;
 }
 current=remaining[Math.floor(Math.random()*remaining.length)];
 document.getElementById("key").classList.add("hidden");
 document.getElementById("es").classList.add("hidden");
 document.getElementById("en").classList.add("hidden");
 
 if(mode==="EN"){
  document.getElementById("langLabel").textContent="INGLES";
  play();
 } else {
  document.getElementById("langLabel").textContent="CASTELLANO";
  document.getElementById("es").textContent=current.es;
  document.getElementById("es").classList.remove("hidden");
 }
}

function reveal(){
 if(!current)return;
 document.getElementById("key").textContent="Paraula clau: " + current.key;
 document.getElementById("key").classList.remove("hidden");
 document.getElementById("es").textContent=current.es;
 document.getElementById("en").textContent=current.en;
 document.getElementById("es").classList.remove("hidden");
 document.getElementById("en").classList.remove("hidden");
 if(mode==="ES") play();
}

function know(){
 if(!current||remaining.length===0)return;
 remaining=remaining.filter(i=>i!==current);
 known++;
 updateCounter();
 load();
}

function nextOne(){ load(); }
function setMode(m){ mode=m; load(); }

function toggleList(){
 const lb = document.getElementById("listBox");
 lb.innerHTML="";
 items.forEach(i=>{
  const d=document.createElement("div");
  d.className="list-item";
  d.innerHTML="<div class='list-es'>"+i.es+"</div><div class='list-en'>"+i.en+"</div>";
  lb.appendChild(d);
 });
 lb.classList.toggle("hidden");
}

updateCounter();
load();
 // --- CÃ“DIGO INTELIGENTE PARA EL CUADRITO DE MARCADO ---

const style = document.createElement('style');
style.innerHTML = `
    .check-box-manual {
        position: absolute;
        top: 85px; 
        right: 22px;
        width: 24px;
        height: 24px;
        background: #fff !important;
        border: 1.5px solid #22c55e !important;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        transition: all 0.2s;
        font-size: 14px;
    }
    .check-box-manual.marked { 
        background: #22c55e !important; 
        color: white; 
    }
`;
document.head.appendChild(style);

function getFolderName() {
    const path = window.location.pathname;
    return path.split('/').filter(Boolean).slice(-2, -1)[0] || "unknown";
}

function markAsDone(element) {
    localStorage.setItem(getFolderName(), new Date().toISOString());
    element.innerHTML = "âœ“";
    element.classList.add('marked');
    alert("LliÃ§Ã³ marcada âœ…");
}

// 1. Crear el cuadrito
const card = document.querySelector(".card");
const box = document.createElement("div");
box.className = "check-box-manual";

// 2. Comprobar si ya estaba marcada antes de pintarla
if (localStorage.getItem(getFolderName())) {
    box.innerHTML = "âœ“";
    box.classList.add('marked');
}

box.onclick = function() { markAsDone(this); };
card.appendChild(box);
</script>
</body>
</html>